<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name='viewport' content='width=device-width'>
    <title>Phragmén Explorable</title>
    <link href="css/style.css" rel="stylesheet" type="text/css">
  </head>
  
  <body>
    <h1>How Sequential Phragmén voting works</h1>
    <p>This is an <a href="https://explorabl.es/">explorable explanation</a> of the Sequential <a href="https://en.wikipedia.org/wiki/Lars_Edvard_Phragm%C3%A9n">Phragmén voting system</a> (invented in the 1890s) currently used on <a href="http://kusama.network">Kusama</a> and <a href="http://polkadot.network">Polkadot's</a> on-chain elections. You can create candidates and voters, adjust their voting stake (drag left and right or type) and add and delete votes to see how it affects the results.</p>


    <h2>Example 1 from Polkadot Wiki</h2>

    Simple 1KSM per voter blah blah...
    
    <div id="container" class="container">
      <div class="candidates">
	<h3>candidates</h3>
	<table>
	  <thead>
	    <tr>
	      <th>name</th>
	      <th>tokens</th>
	      <th>vote</th>
	      <th>elected</th>
	      <th>delete</th>
	    </tr>
	  </thead>
	  <tbody id="one_candidates">
	  </tbody>
	</table>      
	<button id="one_new_candidate">add candidate</button>
	<p>number to elect: <input id="one_num_rounds" type="number" value=2></input></p>
      </div>
      <div class="voters">
	<h3>voters</h3>
	<table>
	  <thead>
	    <tr>
	      <th>name</th>
	      <th>stake</th>
	      <th>votes</th>
	      <th>delete</th>
	    </tr>
	  </thead>
	  <tbody id="one_voters">
	  </tbody>
	</table>
	<button id="one_new_voter">add voter</button>
      </div>    
    </div>

    <hr>

    <h2>Example 2 from Polkadot Wiki</h2>

    Different weights (budgets) per voter...
    
    <div id="container" class="container">
      <div class="candidates">
	<h3>candidates</h3>
	<table>
	  <thead>
	    <tr>
	      <th>name</th>
	      <th>tokens</th>
	      <th>vote</th>
	      <th>elected</th>
	      <th>score per round</th>
	      <th>delete</th>
	    </tr>
	  </thead>
	  <tbody id="two_candidates">
	  </tbody>
	</table>      
	<button id="two_new_candidate">add candidate</button>
	<p>number to elect: <input id="two_num_rounds" type="number" value=2></input></p>
      </div>
      <div class="voters">
	<h3>voters</h3>
	<table>
	  <thead>
	    <tr>
	      <th>name</th>
	      <th>stake</th>
	      <th>load per round</th>
	      <th>votes</th>
	      <th>delete</th>
	    </tr>
	  </thead>
	  <tbody id="two_voters">
	  </tbody>
	</table>
	<button id="two_new_voter">add voter</button>
      </div>    
    </div>

    <hr>

    <h2>Conviction</h2>

    Example 2 with conviction added...
    
    <div id="container" class="container">
      <div class="candidates">
	<h3>candidates</h3>
	<table>
	  <thead>
	    <tr>
	      <th>name</th>
	      <th>tokens</th>
	      <th>vote</th>
	      <th>elected</th>
	      <th>score per round</th>
	      <th>delete</th>
	    </tr>
	  </thead>
	  <tbody id="three_candidates">
	  </tbody>
	</table>      
	<button id="three_new_candidate">add candidate</button>
	<p>number to elect: <input id="three_num_rounds" type="number" value=2></input></p>
      </div>
      <div class="voters">
	<h3>voters</h3>
	<table>
	  <thead>
	    <tr>
	      <th>name</th>
	      <th>stake</th>
	      <th>conviction</th>
	      <th>load per round</th>
	      <th>votes</th>
	      <th>delete</th>
	    </tr>
	  </thead>
	  <tbody id="three_voters">
	  </tbody>
	</table>
	<button id="three_new_voter">add voter</button>
      </div>    
    </div>

    <script src="bundle.js"></script>

    <p>
      Todo:
      <ul>
	<li>Explain loads and scores per round</li>
	<li>Figure out ordered votes for council elections</li>
	<li>Import on-chain election results</li>
      </ul>
      <a href="https://github.com/playing-with-dust/phragviz">GPL3 source code here</a>
    <p>
  </body>
</html>
